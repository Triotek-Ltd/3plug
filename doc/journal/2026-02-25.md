# Journal - 2026-02-25

## Focus
Define the planning baseline and future direction for 3plug, then establish a delivery path and complete the architecture/model doc set, plus branding/SEO foundations and a docs index before development rollout work.

## Current State
- `doc/current_state.md` was reviewed and polished into a confirmed baseline.
- `doc/target_state.md` and `doc/future_state.md` were created to define platform direction.
- `doc/delivery_path.md` captures the build/run path from dashboards to cloud-native production and includes Phase 1 category/folder confirmation guidance (`plug-platform/` + `bundles/`).
- Core architecture/model docs were drafted locally (ignored from commits).
- Branding and SEO foundation guides were added before Phase 2.
- Phase 2 shell planning docs now include:
  - `doc/navigation_shell_ia.md`
  - `doc/navigation_shell_schema.md`
  - `doc/website_ia.md`
- `doc/how_to_use_docs.md` and `doc/docs_index.md` support dev workflow and navigation.

## Changes Made
- Added `doc/website_ia.md` to define the public website IA (`/`) separate from the authenticated portal desk (`/home`).
- Documented the simple SEO-first public page approach and route split (`/` public, `/home` authenticated desk).
- Benchmarked the referenced SaaS landing page for structure inspiration only (hero/features/FAQ/footer flow), not for complexity or direct UI copying.
- Added the benchmark reference link to the website IA doc.
- Added RTL/LTR support requirements to Phase 2 planning docs (`delivery_path`, shell IA/schema, website IA) and to branding/SEO guides.
- Implemented the route split in `src/pages`:
  - moved existing dashboard entry behavior from `/` to `/home` (`src/pages/home.js`)
  - replaced `/` with a simplified public landing page (`src/pages/index.js`) based on the approved SaaS benchmark structure (hero, 3 plugs, platform/bundles, deployment, marketplace, FAQ, footer)
- Updated `src/pages/_app.js` to support public routes without auth redirect and without the authenticated app shell (sidebar/navbar/footer shell), while preserving app shell behavior for authenticated routes.

## Decisions
- We can borrow useful Frappe desk/workspace patterns, but 3plug keeps its own model and naming (including docs instead of doctypes).
- Public website and authenticated portal are split:
  - `/` = public website (SEO/product discovery)
  - `/home` = authenticated landing desk / portal entry
- Website should be simple and SEO-first, not template-complex.
- Benchmark pages are used for structural inspiration only, not design copying.
- Navigation shell should be config/schema-driven (with a resolver) before UI implementation to avoid hardcoded visibility logic.
- Both the public website and platform shell must support `LTR` and `RTL` from the start (no later retrofit).
- `/` is now the public website and `/home` is the authenticated portal landing desk in implementation (not just planning).

## Blockers
- None blocking documentation progress.
- Remaining refinements include final API payload details, artifact packaging/distribution, async orchestration model, branding asset production (simplified marks/variants), and eventual CLI/runtime package refactor planning if `plug/` is renamed later.

## Next Steps
- Implement the shell config/schema in `src/` (types + seed config + resolver) based on `doc/navigation_shell_schema.md`.
- Refine the public website implementation using `doc/website_ia.md` (public routes like `/platform`, `/solutions`, `/deployments/*`, `/apps`, `/publishers`).
- Continue journaling each planning/architecture decision and implementation step.

## References
- `doc/delivery_path.md`
- `doc/navigation_shell_ia.md`
- `doc/navigation_shell_schema.md`
- `doc/website_ia.md`
- `doc/branding_guide_3plug.md`
- `doc/seo_guide_3plug.md`
- `doc/delivery_path.md`
- `src/pages/index.js`
- `src/pages/home.js`
- `src/pages/_app.js`
- Benchmark: https://shreethemes.in/techwind/landing/index-modern-saas.html
- Refactored the public website landing page into reusable components under `src/components/website/landing/` (`LandingPage`, `HeroDashboardCard`, `BrandLogo`, `data`).
- Reduced `src/pages/index.js` to a thin page wrapper (`Head` + `LandingPage`) so website UI is no longer hardcoded in the route file.
- Added a reusable 3plug logo component that uses the current `public/brand/logo-3plug.png` asset and crops the pictorial mark for header/footer branding while keeping the content and layout style aligned to the approved benchmark.
- Tightened public website media usage for the benchmark-replica phase: added temporary Techwind benchmark video (`modern.mp4`) and benchmark image placeholders in the landing component data.
- Updated landing media rendering to use a shared `ContainImage` helper (`object-contain`, lazy-loading/async decode by default) and kept logo/illustrative assets full-visible instead of cropped.
- Confirmed benchmark HTML (`doc/benchmark/weblandingpageindex.html`) is the local source of truth for replica alignment (sections/media references), while 3plug content remains substituted.
- Corrected the landing page hero and first sections to follow the benchmark composition more closely: benchmark-style hero split (headline + subscribe form + background image card with floating stats), intro icon + heading + video section, and two alternating image/text feature rows.
- Kept only content/wording adapted for 3plug while preserving the benchmark section pattern and media treatment.
- Completed a broader benchmark-parity pass for the public landing page (`src/components/website/landing/LandingPage.js`): tighter template-style button variants, benchmark-like hero/intro/feature section structure, stronger shadow/radius/effect parity, and a darker benchmark-style footer layout.
- Added lightweight template-feel interactions in the landing component (mobile nav toggle, cookie popup, back-to-top, and an LTR/RTL toggle control) without importing the original template scripts.
- Kept benchmark media as temporary placeholders and retained the componentized structure so further section-level parity refinements can be done safely.
- Polished public website content from template-like/dummy wording to 3plug-specific messaging: platform bundle vs app bundles, portal-first entry (`/` -> `/home`), tenant/site activation, publisher ecosystem, marketplace lifecycle, and cloud/local deployment framing.
- Updated both reusable landing data (`src/components/website/landing/data.js`) and section copy in `src/components/website/landing/LandingPage.js` so content reads as real product messaging while media remains temporary benchmark placeholders.
- Replaced placeholder arrow glyphs in the public landing page with proper SVG icons (CTA links, footer list links, back-to-top control) and updated FAQ accordions to use a rotating chevron icon for cleaner, consistent UI behavior.
- Updated public website copy to use full names instead of internal abbreviations (Operations, Management, Administration, industry-specific packs) so public-facing content does not assume internal shorthand knowledge.
- Created `files/frappe apps/` and downloaded the public Frappe benchmark app repositories (core first-party apps plus selected public community/integration apps) for mapping work.
- Added `files/frappe apps/download_inventory.json` to track downloaded repos and marketplace/unknown-source apps still pending manual source acquisition.
- Resolved ERPNext Shipping repo alias to `frappe/erpnext-shipping` (hyphen) and downloaded it after the initial underscore URL failed.
- Completed Frappe benchmark source capture task for `doc/benchmark/frappe.md`: all identified app entries now have a local artifact under `doc/files/frappe apps/` (repo clone for public-source apps, downloaded listing/search snapshots for the rest).
- Regenerated `doc/files/frappe apps/all_identified_apps_inventory.json` with clean statuses; current coverage is `39/39` apps with `0` missing local artifacts.
- Removed the old empty root `files/` folder so benchmark files now live only under `doc/files/` as requested.
- Generated Frappe JSON inventories from cloned repos under `doc/files/frappe apps/`: `frappe_modules_inventory.json` and `frappe_doctypes_inventory.json`.
- Inventory generation now reads `modules.txt` and DocType JSON files (`doctype/*/*.json`) from local clones to produce machine-readable module and doctype listings for mapping work.
- Corrected doctype inventory `package_name` extraction (e.g., `accounts` instead of `doctype`) after an initial generation pass.
- Generated 3plug JSON inventories under `doc/files/3plug/` for current and planned bundle structures: current bundle app registrations (`3plug_bundle_apps_inventory.json`) and R&D-derived bundle/apps/modules/transactions (`3plug_bundles_modules_inventory.json`, `3plug_bundle_apps_from_rnd_inventory.json`).
- Adjusted the R&D parser so all bundles are explicitly listed with app rows (including bundles whose markdown only defines modules/transactions), and corrected module title extraction from the R&D markdown heading format.

- Generated `doc/files/3plug/3plug_business_transactions_docs.json` as a seed JSON from `3plug_bundles_modules_inventory.json` using the locked 3plug hierarchy (`bundle -> app -> module -> submodule -> business_transaction -> doc`).
- Current R&D transaction lines are reclassified as `submodules` in the seed file, and each submodule now has generated lifecycle business transactions (`initiate`, `process`, `close`) plus placeholder 3plug docs marked `generated_needs_review` / `to_define` for later Frappe-doctype mapping.
- Seed counts captured in the new 3plug business-transactions/docs JSON: bundles=16, apps=16, modules=238, submodules=580, generated_business_transactions=1740, generated_docs=3480, unmapped_submodules=0.

- Created doc/mapping/to borrow.md to define what 3plug will borrow from Frappe (workspaces, navigation shell patterns, lists/forms, reports, print formats, permissions/workflows, operational support patterns) before the actual doctype-to-doc mapping step.


- Generated `doc/files/3plug/doctype_to_doc_mapping.json` as a fit/closeness-based seed mapping from Frappe DocTypes to 3plug docs (heuristic token/phrase matching with confidence bands and alternate candidates).
- Mapping seed includes explicit unmatched lists as requested: mapped_3plug_docs=1446, unmapped_3plug_docs=2034, unused_frappe_doctypes=1299.

- Created final mapping JSONs under `doc/mapping/`: `doctype_to_doc_mapping_final.json` (refined seed mappings) and `doc_gap_classification.json` (explicit unmapped 3plug docs classified into `build_from_scratch` vs `needs_better_frappe_match`).
- Refined high-value bundles (`adm`, `ops`, `mgt`) by propagating best-fit Frappe doctype matches across docs in the same 3plug submodule where the seed had medium/high confidence, adding propagated_mapped=0 docs.
- Final mapping counts after refinement: mapped=1446, unmapped=2034, build_from_scratch=1212, needs_better_frappe_match=822.

- Performed a manual functional refinement pass for core bundles (`adm`, `ops`, `mgt`) on `doc/mapping/doctype_to_doc_mapping_final.json`, mapping governance/process/meta docs to explicit Frappe framework/ERPNext doctypes (Workflow, Notification, User/Role/Permissions, Dashboard/Report, File/Communication, Budget, Contract, etc.).
- Manual rule refinement promoted 486 docs from `priority_core_needs_better_match`; updated remaining gap counts: unmapped=1548, build_from_scratch=1212, needs_better_frappe_match=336.

- Created doc/mapping/doc_actions_model.json (v1 locked action vocabulary for 3plug Docs) covering the 15 platform-level doc actions, aliases, state transitions, guard rules, and per-doc policy requirements to support dev work on schema/types/resolvers and UI action bars.


- Defined `doc/mapping/3plug_doc_model.json` (3plug Doc meta/record structure borrowing Frappe DocType JSON patterns while keeping 3plug naming/context), `doc/mapping/3plug_structure_confirmation.json` (hierarchy confirmation), and `doc/mapping/backend_fetch_shape.json` (backend/runtime fetch envelope and Phase 2 shell fetch requirements).
- Updated `doc/delivery_path.md` with a Phase 2 pre-dev checkpoint to lock doc model/structure and backend fetch shape before shell schema/types + resolver implementation.

- Created `doc/mapping/client_cache_policy.json` to lock 3plug client caching/offline policy for dev start (IndexedDB for drafts/metadata/list caches, server drafts for sensitive transactional records, tenant-scoped cache keys, offline queue restrictions, and client-side security constraints).

- Built and verified the v1 plug command-system baseline for 3plug structure scaffolding (bundle/app/module/submodule/doc) with env-safe execution (env\\Scripts\\python.exe -m plug.cli). Added bundle/submodule command support + compatibility aliases, upgraded generators to emit 3plug metadata/schema JSONs, and ensured doc scaffolds include the full 20-action vocabulary from doc_actions_model.json.
- Created doc/mapping/plug_command_matrix_v1.json as the v1 command matrix/release-candidate contract for developers/publishers. End-to-end sample scaffold/drop verification passed (using safety stubs for migrations/install hooks): bundle->app->module->submodule->doc creation and cleanup succeeded, registries updated correctly, and drop-bundle now removes scaffold-only bundles after apps are removed.


- Updated the CLI/app scaffolding to use the real v1 hierarchy directly (undle/app/module/submodule/doc) instead of the old nested pp/app/module layout. Patched app path resolution helpers (get_app_module_path, ind_module_base_path) so backend helper code can read the direct app-root module registry while still supporting legacy fallback.
- Added app-root placeholders/manifests for backend/frontend/bundling (ackend/, rontend/, undling/release.template.yml, pp.json) and updated README.md with env-safe command usage and the expected generated hierarchy.
- Re-ran env-safe sample scaffold/drop verification after the direct-layout changes: direct app root/module/submodule/doc paths were created successfully (no nested duplicate app folder), doc scaffolds still included the full 20-action vocabulary, and cleanup commands removed the generated structure and bundle registry entries correctly.


- Updated main-repo policy so local bundle/app repos under `bundles/` are ignored in `.gitignore` (with `bundles/.gitkeep` retained), reflecting the architecture decision that each app is versioned in its own repo.
- Updated `README.md` and `doc/mapping/plug_command_matrix_v1.json` to clarify v1 command access policy: normal use should favor `new/get` for bundles/apps and platform `update/upgrade` flows, while deeper structure commands (`new-module`, `new-submodule`, `new-doc`, drops) are reserved for developers/publishers.

- Reset undles/ to a clean baseline for fresh CLI-generated structure creation: removed previously hardcoded/generated bundle folders (dm, mgt, ops, integrations) and bundle placeholder files, leaving only undles/.gitkeep. Untracked bundle contents in the main repo policy path remains enforced by .gitignore.

